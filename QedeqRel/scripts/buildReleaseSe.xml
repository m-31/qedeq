<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- $Id: buildReleaseSe.xml,v 1.30 2008/01/26 12:39:57 m31 Exp $ -->
<!-- $RCSfile: buildReleaseSe.xml,v $ -->
<!-- $Revision: 1.30 $ -->
<!-- author: mime -->
<!-- project: Hilbert II -->

<!-- This is the Ant build file for building the Se release of project Hilbert II -->
<project name="Hilbert II" default="all" basedir="../..">

  <!-- set global properties for this build -->
  <property file="${basedir}/QedeqRel/conf/build.properties" />
  <property name="qedeq.kernel.se.src"   value="${basedir}/QedeqKernelSe/src" />
  <property name="qedeq.gui.se.src"      value="${basedir}/QedeqGuiSe/src" />
  <property name="qedeq.se.test.src"     value="${basedir}/QedeqKernelSeTest/src" />
  <property name="qedeq.se.test.data"    value="${basedir}/QedeqKernelSeTest/data" />
  <property name="qedeq.lib"             value="${basedir}/QedeqLib" />
  <property name="qedeq.gen"             value="${basedir}/../../qedeq_gen" />
  <property name="qedeq.se.gen"          value="${basedir}/../../qedeq_gen/release/se" />
  <property name="qedeq.se.dest"         value="${basedir}/../../qedeq_gen/release/se/dest/qedeq" />
  <property name="qedeq.se.dist"         value="${basedir}/../../qedeq_gen/release/se/dist" />
  <property name="qedeq.se.temp"         value="${basedir}/../../qedeq_gen/release/se/temp" />
  <property name="qedeq.se.webstart"     value="${basedir}/../../qedeq_gen/release/se/webstart" />
  <property name="qedeq.gen.doc"         value="${basedir}/../../qedeq_gen" />
  <property name="qedeq.se.doc"          value="${basedir}/QedeqRel/doc/se" />
  <property name="qedeq.se.rel"          value="${basedir}/QedeqRel/inc/se" />
  <property name="qedeq.rel.src"         value="${basedir}/QedeqRel/src" />
  <property name="qedeq.rel.images"      value="${basedir}/QedeqRel/inc/images" />
	
  <path id="classpath.common">
      <pathelement location="${qedeq.lib}/junit.jar"/>
      <pathelement location="${qedeq.lib}/xercesImpl.jar" />
      <pathelement location="${qedeq.lib}/xml-apis.jar" />
      <pathelement location="${qedeq.lib}/commons-logging-1.1.jar" />
      <pathelement location="${qedeq.lib}/log4j-1.2.14.jar" />
      <pathelement location="${qedeq.lib}/forms-1.1.0.jar" />
      <pathelement location="${qedeq.lib}/looks-2.1.4.jar" />
      <pathelement location="${qedeq.se.dest}/classes/kernel" />
  </path>

  <tstamp>
      <format property="qedeq.se.timestamp" pattern="yyyy-MM-dd HH:mm:ss"/>
  </tstamp>

  <filterset id="qedeq_filter" begintoken="@" endtoken="@">
      <filter token="QEDEQ_VERSION"     value="${qedeq.working.version}" />
      <filter token="QEDEQ_CODENAME"    value="${qedeq.working.codename}" />
      <filter token="QEDEQ_DIRECTORY"   value="${qedeq.working.directory}" />
      <filter token="QEDEQ_TIMESTAMP"   value="${qedeq.se.timestamp}" />
  </filterset>

  <taskdef name="xsddoc" classname="net.sf.xframe.xsddoc.Task" classpath="${qedeq.lib}/xsddoc.jar" />
		
  <target name="init">
  	<delete dir="${qedeq.se.dest}"/>
    <mkdir dir="${qedeq.se.dest}"/>
  	<delete dir="${qedeq.se.dist}"/>
    <mkdir dir="${qedeq.se.dist}"/>
  	<delete dir="${qedeq.se.temp}"/>
    <mkdir dir="${qedeq.se.temp}"/>
  </target>


  <target name="compileKernel" depends="sourceKernel">
  	<delete dir="${qedeq.se.dest}/classes/kernel"/>
    <mkdir dir="${qedeq.se.dest}/classes/kernel"/>
    <javac compiler="javac1.4" 
      srcdir="${qedeq.se.dest}/src/kernel"
      destdir="${qedeq.se.dest}/classes/kernel"
      debug="on"
      deprecation="on"
      classpathref="classpath.common" 
    />
    <copy todir="${qedeq.se.dest}/classes/kernel">
      <fileset dir="${qedeq.kernel.se.src}"
	       includes="**/*.xsd"
       />
    </copy>
  </target>


  <target name="sourceKernel" depends="init">
  	<delete dir="${qedeq.se.dest}/src/kernel"/>
    <mkdir dir="${qedeq.se.dest}/src/kernel"/>
    <copy todir="${qedeq.se.dest}/src/kernel" >
      <fileset dir="${qedeq.kernel.se.src}"
       />
    </copy>
<!--  	
    <copy todir="${qedeq.se.dest}/src/kernel" >
      <fileset dir="${qedeq.rel.src}"
       includes="org/qedeq/kernel/rel/test/text/*.java,org/qedeq/kernel/rel/test/text/*.html,org/qedeq/kernel/rel/test/gui/*.java,org/qedeq/kernel/rel/test/gui/*.html"/>
    </copy>
-->
  </target>  

	  <target name="compileGui" depends="sourceGui,compileKernel">
	  	<delete dir="${qedeq.se.dest}/classes/gui"/>
	    <mkdir dir="${qedeq.se.dest}/classes/gui"/>
	    <javac compiler="javac1.4"
	      srcdir="${qedeq.se.dest}/src/gui"
	      destdir="${qedeq.se.dest}/classes/gui"
	      debug="on"
	      deprecation="on"
	      classpathref="classpath.common"
	    />
	    <copy todir="${qedeq.se.dest}/classes/gui">
	      <fileset dir="${qedeq.gui.se.src}"
		       includes="**/*.gif,**/*.png,**/*.properties,**/*.xml"
	       />
	    </copy>
	  </target>


  <target name="sourceGui" depends="init">
  	<delete dir="${qedeq.se.dest}/src/gui"/>
    <mkdir dir="${qedeq.se.dest}/src/gui"/>
    <copy todir="${qedeq.se.dest}/src/gui" >
      <fileset dir="${qedeq.gui.se.src}"
       />
    </copy>
  </target>  

  
  <target name="sourceTest" depends="init">
  	<delete dir="${qedeq.se.dest}/srcTest"/>
    <mkdir dir="${qedeq.se.dest}/srcTest"/>
    <copy todir="${qedeq.se.dest}/srcTest" >
<!-- why should that be also be in the test source directory???      
      <fileset dir="${qedeq.kernel.se.src}"
       />
-->       
    <fileset dir="${qedeq.se.test.src}"
     />
    </copy>
    <mkdir dir="${qedeq.se.dest}/srcTest/data"/>
    <copy todir="${qedeq.se.dest}/srcTest/data" >
	  <fileset dir="${qedeq.se.test.data}"
	   />
    </copy>
  </target>  

  
  <target name="doc" depends="init">
  	<antcall target="makePdf" />
    <mkdir dir="${qedeq.se.dest}/doc" />
    <mkdir dir="${qedeq.se.dest}/doc/project" />
    <copy todir="${qedeq.se.dest}/doc/project">
      <fileset dir="${qedeq.se.gen}" 
        includes="clover/**" 
      />
    </copy>
    <copy todir="${qedeq.se.dest}/doc/project/clover">
      <fileset file="${qedeq.se.rel}/clovered.gif"
      />
    </copy>
  	<delete dir="${qedeq.se.dest}/xml" />
    <mkdir dir="${qedeq.se.dest}/xml" />
    <copy todir="${qedeq.se.dest}/xml">
      <fileset dir="${qedeq.se.gen}/xml" 
      />
    </copy>
    <copy todir="${qedeq.se.dest}">
      <fileset dir="${qedeq.se.rel}"
        includes="index.html"
      >
      </fileset>
      <filterset refid="qedeq_filter" />
    </copy>
    <copy todir="${qedeq.se.dest}/doc/project">
      <fileset dir="${qedeq.se.rel}"
        includes="changes.txt"
      >
      </fileset>
      <filterset refid="qedeq_filter" />
    </copy>
    <copy todir="${qedeq.se.dest}/doc">
      <fileset dir="${qedeq.gen.doc}"
        includes="math/**.xml,math/**.tex,math/**.pdf,project/**.xml,project/**.tex,project/**.pdf"
      	excludes="**/qedeq_sample1*"
      >
      </fileset>
    </copy>
    <copy todir="${qedeq.se.dest}/doc/math">
      <fileset dir="doc/description"
        includes="axiomatic_set_theory.txt"
      >
<!-- outdated:        includes="mengenlehre_1.tex,mengenlehre_1.pdf,axiomatic_set_theory.txt" -->
      </fileset>
    </copy>
    <copy todir="${qedeq.se.dest}/doc/project">
      <fileset dir="doc/description"
        includes="projektbeschreibung.tex,projektbeschreibung.pdf"
      >
      </fileset>
    </copy>
  </target>  


  <target name="javadocKernel" description="javadoc kernel" depends="sourceKernel">
    <copy todir="${qedeq.se.temp}">
      <fileset dir="${qedeq.se.rel}" includes="overview.html"/>
      <filterset refid="qedeq_filter" />
    </copy>
  	<delete dir="${qedeq.se.dest}/javadoc/kernel"/>
    <mkdir dir="${qedeq.se.dest}/javadoc/kernel"/>
      <javadoc destdir="${qedeq.se.dest}/javadoc/kernel"
               sourcepath="${qedeq.se.dest}/src/kernel"
               classpathref="classpath.common"
               access="package"
               windowtitle="Hilbert II"
               doctitle="Hilbert II"
               packageList="${qedeq.se.rel}/packagelist_kernel"
               overview="${qedeq.se.temp}/overview.html"
               use="true"
               splitindex="true"
               author="false"
               version="true"
      >
    <!--               stylesheetfile="${qedeq.se.rel}/stylesheet.css"  -->
            <link href="http://java.sun.com/j2se/1.4.2/docs/api/"/>
            <link href="http://java.sun.com/xml/jaxp-docs-1.0.1/docs/api/"/>
            <link href="http://jakarta.apache.org/log4j/docs/api/"/>
            <link href="http://java.sun.com/products/jdbc/jdbc20.stdext.javadoc/"/>
            <header><![CDATA[<b>Hilbert II - Version ${qedeq.working.version}</b>]]></header>
            <footer><![CDATA[<b>Hilbert II - Version ${qedeq.working.version}</b>]]></footer>
            <bottom><![CDATA[<table><td style="font-size:8pt"><a href="http://www.gnu.org/copyleft/gpl.html">&copy;left GNU General Public Licence</a><br> All Rights Reserved.</td></table>]]></bottom>
    </javadoc>
  </target>

  <target name="javadocGui" description="javadoc gui" depends="sourceGui,javadocKernel">
    <copy todir="${qedeq.se.temp}">
      <fileset dir="${qedeq.se.rel}" includes="overview.html"/>
      <filterset refid="qedeq_filter" />
    </copy>
  	<delete dir="${qedeq.se.dest}/javadoc/gui"/>
    <mkdir dir="${qedeq.se.dest}/javadoc/gui"/>
      <javadoc destdir="${qedeq.se.dest}/javadoc/gui"
               sourcepath="${qedeq.se.dest}/src/gui"
               classpathref="classpath.common"
               access="package"
               windowtitle="Hilbert II"
               doctitle="Hilbert II"
               packageList="${qedeq.se.rel}/packagelist_gui"
               overview="${qedeq.se.temp}/overview.html"
               use="true"
               splitindex="true"
               author="false"
               version="true"
      >
    <!--               stylesheetfile="${qedeq.se.rel}/stylesheet.css"  -->
            <link href="http://java.sun.com/j2se/1.4.2/docs/api/"/>
            <link href="http://java.sun.com/xml/jaxp-docs-1.0.1/docs/api/"/>
            <link href="http://jakarta.apache.org/log4j/docs/api/"/>
            <link href="http://java.sun.com/products/jdbc/jdbc20.stdext.javadoc/"/>
            <link href="../kernel/"/>
      	    <link href="http://" />	<!-- TODO jgoodies API ?? -->
            <header><![CDATA[<b>Hilbert II - Version ${qedeq.working.version}</b>]]></header>
            <footer><![CDATA[<b>Hilbert II - Version ${qedeq.working.version}</b>]]></footer>
            <bottom><![CDATA[<table><td style="font-size:8pt"><a href="http://www.gnu.org/copyleft/gpl.html">&copy;left GNU General Public Licence</a><br> All Rights Reserved.</td></table>]]></bottom>
    </javadoc>
  </target>

  <target name="javadocTest" description="javadoc inclusive test classes" depends="sourceTest">
  	<delete dir="${qedeq.se.dest}/javadocTest"/>
    <mkdir dir="${qedeq.se.dest}/javadocTest"/>
      <javadoc destdir="${qedeq.se.dest}/javadocTest"
               sourcepath="${qedeq.se.dest}/src;${qedeq.se.dest}/srcTest"
               classpathref="classpath.common"
               access="package"
               windowtitle="Hilbert II"
               doctitle="Hilbert II"
               packageList="${qedeq.se.rel}/packagelist_kernel"
               overview="${qedeq.se.rel}/overview.html"
               use="true"
               splitindex="true"
               author="false"
               version="true"
      >
    <!--               stylesheetfile="${qedeq.se.rel}/stylesheet.css"  -->
            <link href="http://java.sun.com/j2se/1.4.2/docs/api/"/>
            <link href="http://java.sun.com/xml/jaxp-docs-1.0.1/docs/api/"/>
            <link href="http://jakarta.apache.org/log4j/docs/api/"/>
            <link href="http://java.sun.com/products/jdbc/jdbc20.stdext.javadoc/"/>
            <header><![CDATA[<b>Hilbert II - Java-Packages</b>]]></header>
            <footer><![CDATA[<i>Hilbert II - Java-Packages</i>]]></footer>
            <bottom><![CDATA[<table><td style="font-size:8pt"><a href="http://www.gnu.org/copyleft/gpl.html">&copy;left GNU General Public Licence</a><br> All Rights Reserved.</td></table>]]></bottom>
    </javadoc>
  </target>

  <target name="xsddoc" depends="doc">
    <mkdir dir="${qedeq.se.dest}/xml/qedeq"/>
    <xsddoc file="${qedeq.se.dest}/xml/qedeq.xsd"
	         out="${qedeq.se.dest}/xml/qedeq"
	    doctitle="XML QEDEQ Schema "
	     verbose="true"/>
  </target>	

  <target name="makePdf">
	<antcall target="makePdfCall">
		<param name="pdfdir" value="${qedeq.gen}/math"/>
		<param name="pdffile" value="qedeq_logic_v1_en.tex"/>
	</antcall>
	<antcall target="makePdfCall">
		<param name="pdfdir" value="${qedeq.gen}/math"/>
		<param name="pdffile" value="qedeq_logic_v1_de.tex"/>
	</antcall>
	<antcall target="makePdfCall">
		<param name="pdfdir" value="${qedeq.gen}/math"/>
		<param name="pdffile" value="qedeq_set_theory_v1_en.tex"/>
	</antcall>
	<antcall target="makePdfCall">
		<param name="pdfdir" value="${qedeq.gen}/math"/>
		<param name="pdffile" value="qedeq_set_theory_v1_de.tex"/>
	</antcall>
	<antcall target="makePdfCall">
		<param name="pdfdir" value="${qedeq.gen}/project"/>
		<param name="pdffile" value="qedeq_basic_concept_en.tex"/>
	</antcall>
	<antcall target="makePdfCall">
		<param name="pdfdir" value="${qedeq.gen}/project"/>
		<param name="pdffile" value="qedeq_basic_concept_de.tex"/>
	</antcall>
	<antcall target="makePdfCall">
		<param name="pdfdir" value="${qedeq.gen}/project"/>
		<param name="pdffile" value="qedeq_logic_language_en.tex"/>
	</antcall>
  </target>
	
  <target name="makePdfCall">
  	<exec executable="pdflatex">
  		<arg value="-output-directory" />
  	    <arg value="${pdfdir}" />
  	    <arg value="${pdfdir}/${pdffile}" />
  	</exec>
  	<exec executable="pdflatex">
  		<arg value="-output-directory" />
  	    <arg value="${pdfdir}" />
  	    <arg value="${pdfdir}/${pdffile}" />
  	</exec>
  </target>
	
  <target name="assemble" depends="compileKernel,sourceKernel,sourceTest,compileGui,sourceGui,doc,xsddoc">
    <delete dir="${qedeq.se.dest}/lib" />
    <mkdir dir="${qedeq.se.dest}/lib" />
    <copy todir="${qedeq.se.dest}/lib">
      <!-- fileset file="${qedeq.lib}/xalan.jar" / -->
      <fileset file="${qedeq.lib}/xercesImpl.jar" />
      <fileset file="${qedeq.lib}/xml-apis.jar" />
      <fileset file="${qedeq.lib}/commons-logging-1.1.jar" />
      <fileset file="${qedeq.lib}/log4j-1.2.14.jar" />
      <fileset file="${qedeq.lib}/forms-1.1.0.jar" />
      <fileset file="${qedeq.lib}/looks-2.1.4.jar" />
    </copy>
    <delete dir="${qedeq.se.dest}/license"/>
    <mkdir dir="${qedeq.se.dest}/license"/>
    <copy todir="${qedeq.se.dest}/license">
      <fileset file="${qedeq.se.rel}/gpl.html" />
      <fileset file="${qedeq.se.rel}/fdl.html" />
      <fileset file="${qedeq.se.rel}/*license.txt" />
    </copy>
    <delete dir="${qedeq.se.dest}/sample"/>
    <mkdir dir="${qedeq.se.dest}/sample"/>
    <copy todir="${qedeq.se.dest}/sample">
      <fileset dir="${qedeq.gen.doc}/project"
        includes="*.xml"
      >
      </fileset>
      <fileset dir="${qedeq.gen.doc}/math"
        includes="*.xml"
      >
      </fileset>
	  <fileset dir="${qedeq.se.test.data}"
	    includes="*_error.xml,qedeq_error_sample_*.xml,predlogic.xml,proplogic.xml"
	  >
	  </fileset>
    </copy>
    <delete dir="${qedeq.se.dest}/bin"/>
    <mkdir dir="${qedeq.se.dest}/bin"/>
    <copy todir="${qedeq.se.dest}/bin">
      <fileset dir="${qedeq.se.rel}/bin/" includes="*.bat,*.sh" excludes="qedeq_se.*,xml2*.*"/>
    </copy>
    <copy todir="${qedeq.se.dest}">
      <fileset dir="${qedeq.se.rel}/bin/" includes="qedeq_se.*"/>
    </copy>
    <copy todir="${qedeq.se.dest}">
      <fileset dir="${qedeq.rel.images}" includes="qedeq.*"/>
    </copy>
  	<delete dir="${qedeq.se.dest}/log"/>
    <mkdir dir="${qedeq.se.dest}/log"/>
  	<delete dir="${qedeq.se.dest}/config"/>
    <mkdir dir="${qedeq.se.dest}/config"/>
  	<delete dir="${qedeq.se.dest}/buffer"/>
    <mkdir dir="${qedeq.se.dest}/buffer"/>
    <copy todir="${qedeq.se.dest}/config">
      <fileset file="${qedeq.gui.se.src}/config/*" excludes="**/log4j.properties"/>
    </copy>
  </target>
  
  <target name="jarKernel" depends="compileKernel,sourceKernel,sourceTest,doc,assemble,javadocKernel">
    <delete dir="${qedeq.se.temp}" />
    <mkdir dir="${qedeq.se.temp}" />
    <copy todir="${qedeq.se.temp}">
      <fileset dir="${qedeq.se.rel}" includes="readme.txt"/>
      <filterset refid="qedeq_filter" />    	
    </copy>
    <copy todir="${qedeq.se.temp}">
      <fileset dir="${qedeq.se.rel}" includes="manifest*.txt">
      </fileset>
      <filterset refid="qedeq_filter" />    	
    </copy>

    <jar
     jarfile="${qedeq.se.dist}/qedeq_kernel_se_${qedeq.working.version}.jar"
     manifest="${qedeq.se.temp}/manifest.txt"
    >
      <fileset dir="${qedeq.se.dest}/classes/kernel"
      />
      <fileset dir="${qedeq.se.rel}" includes="gpl.txt"/>
      <fileset dir="${qedeq.se.temp}" includes="readme.txt"/>
    </jar>

    <copy file="${qedeq.se.dist}/qedeq_kernel_se_${qedeq.working.version}.jar" 
      tofile="${qedeq.se.dest}/lib/qedeq_kernel_se.jar"/>

  </target>

  <target name="jarGui" depends="compileGui,sourceGui,doc,assemble,javadocGui">
    <delete dir="${qedeq.se.temp}" />
    <mkdir dir="${qedeq.se.temp}" />
    <copy todir="${qedeq.se.temp}">
      <fileset dir="${qedeq.se.rel}" includes="readme.txt"/>
      <filterset refid="qedeq_filter" />    	
    </copy>
    <copy todir="${qedeq.se.temp}">
      <fileset dir="${qedeq.se.rel}" includes="manifest*.txt">
      </fileset>
      <filterset refid="qedeq_filter" />    	
    </copy>

    <jar
     jarfile="${qedeq.se.dist}/qedeq_gui_se_${qedeq.working.version}.jar"
     manifest="${qedeq.se.temp}/manifest.txt"
    >
      <fileset dir="${qedeq.se.dest}/classes/gui"
      />
      <fileset dir="${qedeq.se.rel}" includes="gpl.txt"/>
      <fileset dir="${qedeq.se.temp}" includes="readme.txt"/>
    </jar>

    <copy file="${qedeq.se.dist}/qedeq_gui_se_${qedeq.working.version}.jar" 
      tofile="${qedeq.se.dest}/lib/qedeq_gui_se.jar"/>

  </target>

  <target name="webstart" depends="jarKernel,jarGui" description="sign jars to be able to webstart">
    <delete dir="${qedeq.se.webstart}" />
    <mkdir dir="${qedeq.se.webstart}" />
    <copy todir="${qedeq.se.webstart}">
      <fileset dir="${qedeq.se.dest}/lib" />
    </copy>
	<signjar jar="${qedeq.se.webstart}/qedeq_kernel_se.jar" alias="qedeqkey"
      storepass="Iewsss#WhadUg" keystore="${qedeq.se.rel}/qedeqKey.bin"/>
	<signjar jar="${qedeq.se.webstart}/qedeq_gui_se.jar" alias="qedeqkey"
      storepass="Iewsss#WhadUg" keystore="${qedeq.se.rel}/qedeqKey.bin"/>
	<signjar jar="${qedeq.se.webstart}/commons-logging-1.1.jar" alias="qedeqkey"
      storepass="Iewsss#WhadUg" keystore="${qedeq.se.rel}/qedeqKey.bin"/>
	<signjar jar="${qedeq.se.webstart}/log4j-1.2.14.jar" alias="qedeqkey"
	  storepass="Iewsss#WhadUg" keystore="${qedeq.se.rel}/qedeqKey.bin"/>
	<signjar jar="${qedeq.se.webstart}/forms-1.1.0.jar" alias="qedeqkey"
	  storepass="Iewsss#WhadUg" keystore="${qedeq.se.rel}/qedeqKey.bin"/>
	<signjar jar="${qedeq.se.webstart}/looks-2.1.4.jar" alias="qedeqkey"
      storepass="Iewsss#WhadUg" keystore="${qedeq.se.rel}/qedeqKey.bin"/>
	<signjar jar="${qedeq.se.webstart}/xercesImpl.jar" alias="qedeqkey"
      storepass="Iewsss#WhadUg" keystore="${qedeq.se.rel}/qedeqKey.bin"/>
	<signjar jar="${qedeq.se.webstart}/xml-apis.jar" alias="qedeqkey"
      storepass="Iewsss#WhadUg" keystore="${qedeq.se.rel}/qedeqKey.bin"/>
    <copy todir="${qedeq.se.webstart}">
      <fileset file="${qedeq.se.rel}/qedeq.jnlp" />
      <fileset file="${qedeq.rel.images}/splash.gif" />
      <fileset file="${qedeq.rel.images}/qedeq.png" />
      <filterset refid="qedeq_filter" />
    </copy>
  </target>
	
  <target name="release" depends="jarKernel,jarGui,sourceTest,doc,assemble,javadocKernel">
    <!-- Windows -->
    <fixcrlf srcdir="${qedeq.se.dest}"
        eol="dos" 
        eof="remove"
        includes="**/*.sh,**/*.java,**/*.html,**/*.txt,**/*.properties,**/*.tex,**/*.xml,**/*.xsd"
    	excludes="**/xml/qedeq/**/*"
    />
    <zip whenempty="create"
      zipfile="${qedeq.se.dist}/qedeq_${qedeq.working.version}_win.zip"
    >
      <fileset dir="${qedeq.se.dest}/.." 
        includes="qedeq/**"
        excludes="**/classes/**" 
      />
    </zip>
  	
    <!-- Unix -->
    <fixcrlf srcdir="${qedeq.se.dest}"
         eol="unix" 
         eof="remove"
        includes="**/*.sh,**/*.java,**/*.html,**/*.txt,**/*.properties,**/*.tex,**/*.xml,**/*.xsd"
    	excludes="**/xml/qedeq/**/*"
    />
    <tar
      destfile="${qedeq.se.dist}/qedeq_${qedeq.working.version}_unx.tar.bz2"
      defaultexcludes="no"
      compression="bzip2"
    >
      <tarfileset dir="${qedeq.se.dest}/.." 
        excludes="**/*.sh,**/classes,**/classes/**/*" 
      />
      <tarfileset dir="${qedeq.se.dest}/.."
        mode="755"
        includes="**/*.sh" 
      />
    </tar>

    <!-- mac -->
<!--
    <fixcrlf srcdir="${qedeq.se.dest}"
         eol="mac" 
         eof="remove"
         includes="**/*.sh,**/*.java,**/*.html,**/*.txt,**/*.properties,**/*.tex,**/*.xml,**/*.xsd"
    />
    <zip whenempty="create"
      zipfile="${qedeq.se.dist}/qedeq_${qedeq.working.version}_mac.zip"
    >
      <fileset dir="${qedeq.se.dest}" 
        excludes="classes/**" 
      />
    </zip>
 -->
    
  </target>
	
  <target name="clean">
    <delete dir="${qedeq.se.dest}"/>
    <delete dir="${qedeq.se.dist}"/>
    <delete dir="${qedeq.se.temp}"/>
  </target>


  <target name="tidy">
    <delete>
      <fileset dir="${qedeq.se.dest}" defaultexcludes="no" includes="**/*~"/>
    </delete>
  </target>


  <target name="all"
	depends="clean,compileKernel,sourceKernel,jarKernel,javadocTest,release,webstart">
  </target>

</project>


